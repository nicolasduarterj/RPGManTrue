#!/usr/bin/env bash
# GNU/Linux startup script generated by JavaPackager plugin

SCRIPTPATH=$(dirname "$(readlink -e "$0")")

function showMessage() {
	if type -p notify-send; then
		notify-send -u critical "RPGManTrue" "$1"
	else
		echo $1
	fi
}
if type -p java > /dev/null; then
    JAVA=java
elif [[ -n "$JAVA_HOME" ]] && [[ -x "$JAVA_HOME/bin/java" ]];  then
    JAVA="$JAVA_HOME/bin/java"
else
    showMessage "Java not installed"
    exit 1
fi

BINARY="$SCRIPTPATH/RPGManTrue"


JVMDefaultOptions=""
JVMOptionsFile="$SCRIPTPATH/RPGManTrue.l4j.ini"
[ -f "${JVMOptionsFile}" ] && while read -r option; do JVMDefaultOptions+=" $option"; done <<< $(sed "/^#.*$/d" "${JVMOptionsFile}")

JVMClassPath="$BINARY"

cd "$SCRIPTPATH"


"${JAVA}" ${JVMDefaultOptions} -jar "${JVMClassPath}" $@
exit 0
